# 双均线交叉策略 - 使用内置仓位操作函数
# 使用 BUY() 和 SELL() 函数生成标准交易信号

-- INPUT date:string, close:number, volume:number --
-- OUTPUT signal:string --

# 计算5日和20日均线
ma5 = MA(close, 5)
ma20 = MA(close, 20)

# 获取前一日均线
prev_ma5 = ma5[-1]
prev_ma20 = ma20[-1]

# 判断金叉条件：短期均线上穿长期均线
# 简化版本：直接比较，不检查 null
is_golden_cross = (ma5 > ma20)

# 判断死叉条件：短期均线下穿长期均线
is_dead_cross = (ma5 < ma20)

# 使用内置函数生成交易信号
signal = is_golden_cross ? BUY() : (is_dead_cross ? SELL() : "持有")

return signal
