# 最简单的双均线策略
# 当前价格高于20日均线买入，低于20日均线卖出

-- INPUT date:string, stock_code:string, open:number, high:number, low:number, close:number, volume:number --
-- OUTPUT signal:string --

# 获取过去20个收盘价
prices_20 = window("close", 20)

# 计算20日均线
ma20_array = SMA(prices_20, 20)
ma20 = ma20_array[-1]

# 如果MA为null，返回持有信号
signal = is_null(ma20) ? "持有" : ((close - ma20 > 1.0) ? BUY() : ((close - ma20 < -1.0) ? SELL() : "持有"))

return signal
