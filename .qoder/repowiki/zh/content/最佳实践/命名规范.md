# 命名规范

<cite>
**本文档引用文件**   
- [6.最佳实践.md](file://dev_logs/6.最佳实践.md)
</cite>

## 目录
1. [包级常量](#包级常量)
2. [局部变量](#局部变量)
3. [私有成员](#私有成员)
4. [函数命名](#函数命名)
5. [Lambda参数](#lambda参数)

## 包级常量

在DPLang中，包级常量应使用描述性名称，以清晰表达其用途和业务含义。避免使用模糊或无意义的单字母或通用名称，确保其他开发者能够直观理解常量的用途。

**推荐做法**：
- 使用具有明确业务含义的中文名称
- 避免使用如`a`、`num`、`max`等模糊名称
- 常量名称应体现其在业务逻辑中的角色

**示例**：
- ✅ `涨停阈值 = 0.1`
- ✅ `默认周期 = 20`
- ✅ `最大持仓数 = 10`
- ❌ `a = 0.1`
- ❌ `num = 20`
- ❌ `max = 10`

**Section sources**
- [6.最佳实践.md](file://dev_logs/6.最佳实践.md#L5-L19)

## 局部变量

局部变量的命名应简洁明确，同时体现其业务含义。避免使用如`temp1`、`result`、`flag`等通用名称，这些名称无法传达变量的实际用途。

**推荐做法**：
- 使用能反映计算内容或业务逻辑的名称
- 保持名称简洁但具有描述性
- 避免临时性、无意义的命名

**示例**：
- ✅ `ma5 = MA(close, 5)`
- ✅ `涨幅 = (close - open) / open`
- ✅ `是否新高 = close >= max(...历史数据)`
- ❌ `temp1 = MA(close, 5)`
- ❌ `result = (close - open) / open`
- ❌ `flag = close >= max(...历史数据)`

**Section sources**
- [6.最佳实践.md](file://dev_logs/6.最佳实践.md#L21-L35)

## 私有成员

在包中定义的私有成员应使用下划线`_`作为前缀，以明确标识其私有性质。这种命名约定有助于区分公开API和内部实现细节。

**推荐做法**：
- 所有私有变量和函数以`_`开头
- 公开成员不使用下划线前缀
- 保持私有成员的内部实现细节不被外部直接依赖

**示例**：
- ✅ `_内部配置 = 100`
- ✅ `_调试模式 = false`
- ✅ `_辅助计算(x): return x * 2`
- ✅ `默认参数 = 10`
- ✅ `计算涨跌幅(open, close): return (close - open) / open`

**Section sources**
- [6.最佳实践.md](file://dev_logs/6.最佳实践.md#L37-L55)

## 函数命名

函数命名应以动词开头或使用描述性名称，清晰表达函数的行为和目的。避免使用模糊的名称如`处理`，也不应使用英文命名破坏语言一致性。

**推荐做法**：
- 使用动词开头，表达操作行为
- 名称应描述函数的具体功能
- 保持全中文命名，避免中英混杂

**示例**：
- ✅ `计算涨跌幅(open, close): return (close - open) / open`
- ✅ `判断涨停(涨幅): return 涨幅 >= 涨停阈值`
- ✅ `筛选强势股(stocks, 阈值): return filter(stocks, s -> s.强度 > 阈值)`
- ❌ `处理(open, close)` （太模糊）
- ❌ `f1(涨幅)` （无意义）
- ❌ `filter_data(stocks, 阈值)` （不使用中文）

**Section sources**
- [6.最佳实践.md](file://dev_logs/6.最佳实践.md#L57-L76)

## Lambda参数

Lambda表达式的参数命名应根据逻辑复杂度选择：简单逻辑使用单字母，复杂逻辑使用描述性名称。这有助于在保持简洁的同时确保代码可读性。

**推荐做法**：
- 简单的单行表达式使用单字母参数
- 复杂逻辑或长表达式使用描述性名称
- 带索引的映射操作使用描述性名称

**示例**：
- ✅ 简单逻辑：`map(array, x -> x * 2)`
- ✅ 简单逻辑：`filter(prices, p -> p > 100)`
- ✅ 简单逻辑：`reduce(values, (a, b) -> a + b)`
- ✅ 复杂逻辑：`filter(stocks, stock -> stock.收益率 > 0.1 and stock.风险度 < 0.5)`
- ✅ 复杂逻辑：`map(交易记录, 交易 -> 交易.价格 * 交易.数量)`
- ✅ 带索引：`map(数据, (值, 索引) -> 索引 > 0 ? 值 - offset(值, -1) : 0)`

**Section sources**
- [6.最佳实践.md](file://dev_logs/6.最佳实践.md#L78-L94)